<Window xmlns="https://github.com/avaloniaui"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:vm="using:Client.ViewModels"
xmlns:views="using:Client.Views"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" d:DesignWidth="1440" d:DesignHeight="900"
x:Class="Client.Views.MainWindow"
x:DataType="vm:MainWindowViewModel"
Width="1440"
Height="900"
MinWidth="1024"
MinHeight="768"
Icon="/Assets/avalonia-logo.ico"
Title="PROJXON HRIS">
    
<Design.DataContext>
    <vm:MainWindowViewModel/>
</Design.DataContext>

<Grid>
    <!-- Main Content Layer -->
    <ContentControl Content="{Binding CurrentViewModel}">
        <ContentControl.DataTemplates>
            <DataTemplate DataType="{x:Type vm:LoginViewModel}">
                <views:LoginView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:PortalSelectionViewModel}">
                <views:PortalSelectionView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:HRDashboardViewModel}">
                <views:HRDashboardView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:InternDashboardViewModel}">
                <views:InternDashboardView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:EmployeesListViewModel}">
                <views:EmployeesListView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:EmployeesViewModel}">
                <views:EmployeesView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:EmployeeDetailViewModel}">
                <views:EmployeeDetailView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:ProfileViewModel}">
                <views:ProfileView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:AttendanceViewModel}">
                <views:AttendanceView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:RecruitmentViewModel}">
                <views:RecruitmentView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:FormsViewModel}">
                <views:FormsView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:CreateSurveyViewModel}">
                <views:CreateSurveyView />
            </DataTemplate>
        </ContentControl.DataTemplates>
    </ContentControl>

    <!-- Floating Button: Dev Mode (Bottom Right, Stacked above Switch Portal) -->
    <Button Command="{Binding ToggleDevModeCommand}"
            IsVisible="{Binding IsDevButtonVisible}"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Margin="0,0,24,144"
            Background="White"
            BorderBrush="#E5E7EB"
            BorderThickness="1"
            CornerRadius="8"
            Padding="16,10"
            Cursor="Hand"
            ZIndex="999">
        <Button.Styles>
            <Style Selector="Button:pointerover /template/ ContentPresenter">
                <Setter Property="Background" Value="#F3F4F6" />
            </Style>
        </Button.Styles>
        <StackPanel Orientation="Horizontal" Spacing="8">
            <Viewbox Width="16" Height="16">
                <Canvas Width="24" Height="24">
                    <!-- Code/Terminal Icon -->
                    <Path Stroke="#F59E0B" StrokeThickness="2" Data="M16 18l6-6-6-6" />
                    <Path Stroke="#F59E0B" StrokeThickness="2" Data="M8 6l-6 6 6 6" />
                </Canvas>
            </Viewbox>
            <TextBlock Text="{Binding DevModeButtonText}" 
                       FontSize="14" 
                       FontWeight="Medium" 
                       Foreground="#374151" />
        </StackPanel>
    </Button>

    <!-- Floating Button: Switch Portal (Bottom Right) -->
    <Button Command="{Binding SwitchPortalCommand}"
            IsVisible="{Binding IsSwitchPortalVisible}"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Margin="0,0,24,80"
            Background="White"
            BorderBrush="#E5E7EB"
            BorderThickness="1"
            CornerRadius="8"
            Padding="16,10"
            Cursor="Hand"
            ZIndex="999">
        <Button.Styles>
            <Style Selector="Button:pointerover /template/ ContentPresenter">
                <Setter Property="Background" Value="#F3F4F6" />
            </Style>
        </Button.Styles>
        <StackPanel Orientation="Horizontal" Spacing="8">
            <Viewbox Width="16" Height="16">
                <Canvas Width="24" Height="24">
                    <!-- Refresh/Switch Icon -->
                    <Path Stroke="#1F2937" StrokeThickness="2" Data="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                    <Path Stroke="#1F2937" StrokeThickness="2" Data="M3 3v5h5"/>
                    <Path Stroke="#1F2937" StrokeThickness="2" Data="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/>
                    <Path Stroke="#1F2937" StrokeThickness="2" Data="M16 21h5v-5"/>
                </Canvas>
            </Viewbox>
            <TextBlock Text="Switch Portal" 
                       FontSize="14" 
                       FontWeight="Bold" 
                       Foreground="#1F2937" />
        </StackPanel>
    </Button>
</Grid>
</Window>